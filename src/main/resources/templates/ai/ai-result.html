<!DOCTYPE html>
<!--ì›ë³¸ blog.html-->
<html lang="en" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{customer/layout/default}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Foogra - Discover & Book the best restaurants at the best price">
    <meta name="author" content="Ansonika">
    <title>Foogra - Discover & Book the best restaurants at the best price</title>

    <!-- Favicons-->
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" type="image/x-icon" href="img/apple-touch-icon-57x57-precomposed.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="72x72" href="img/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="114x114"
          href="img/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="144x144"
          href="img/apple-touch-icon-144x144-precomposed.png">

    <!-- GOOGLE WEB FONT -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
          rel="stylesheet">


    <!-- SPECIFIC CSS -->

    <link rel="stylesheet" th:href="@{/css/customer/blog.css}">


    <!-- YOUR CUSTOM CSS -->
    <link rel="stylesheet" th:href="@{/css/custom.css}">


</head>
<body>
<main class="page_header element_to_stick" layout:fragment="main">
    <div class="container">
        <div class="row">
            <div class="col-xl-8 col-lg-7 col-md-7 d-none d-md-block">
                <div class="breadcrumbs blog">
                    <ul>
                        <li><a href="#">ë§ˆì´í˜ì´ì§€</a></li>
                        <li>ì‹œì•ˆìƒì„±í•˜ê¸°</a></li>
                        <!--				                <li>Page active</li>-->
                    </ul>
                </div>
            </div>
            <!--					ì¼€ì´í¬ì‹œì•ˆ í”„ë¡¬í”„íŠ¸ ìƒì„±-->
            <!--                <div class="col-xl-4 col-lg-5 col-md-5">-->
            <!--                    <div class="search_bar_list">-->
            <!--                        <input type="text" class="form-control" placeholder="ì›í•˜ëŠ” ì¼€ì´í¬ì‹œì•ˆì„ ì ì–´ì£¼ì„¸ìš”">-->
            <!--                        <input type="submit" value="ìƒì„±">-->
            <!--&lt;!&ndash;                        <input type="text" class="form-control" placeholder="ì›í•˜ëŠ” ì¼€ì´í¬ì‹œì•ˆì„ ì ì–´ì£¼ì„¸ìš”" style="width: 100%; height: 50px; font-size: 18px;">&ndash;&gt;-->
            <!--&lt;!&ndash;                        <input type="submit" value="ìƒì„±" style="height: 50px; font-size: 18px;">&ndash;&gt;-->
            <!--                    </div>-->
            <!--                </div>-->
        </div>
        <!-- /row -->
    </div>
    <!-- /page_header -->

    <div class="container margin_30_40">
        <div class="row">
            <div class="col-lg-9">
                <!--                <div class="row">-->
                <!--&lt;!&ndash;                    ë™ì ìœ¼ë¡œ ì¶”ê°€ë  ê³µê°„&ndash;&gt;-->
                <!--                    <div class="col-md-6">-->
                <!--                        <article class="blog">-->
                <!--                            <figure>-->
                <!--                                <img src="img/blog-1.jpg" alt="">-->
                <!--                            </figure>-->
                <!--                            <div class="post_info">-->
                <!--                                <small>Category - 20 Nov. 2017</small>-->
                <!--                                <h2>Ea exerci option hendrerit</a></h2>-->
                <!--                                <p>Quodsi sanctus pro eu, ne audire scripserit quo. Vel an enim offendit salutandi, in eos quod omnes epicurei, ex veri qualisque scriptorem mei.</p>-->
                <!--                                <ul>-->
                <!--                                    <li>-->
                <!--                                        <div class="thumb"><img src="img/avatar.jpg" alt=""></div> Admin-->
                <!--                                    </li>-->
                <!--                                    <li><i class="icon_comment_alt"></i>20</li>-->
                <!--                                </ul>-->
                <!--                            </div>-->
                <!--                        </article>-->
                <!--                        &lt;!&ndash; /article &ndash;&gt;-->
                <!--                    </div>-->
                <div class="row" id = "image-container">
<!--                    ì—¬ê¸°ì— ìƒˆë¡œìš´ ì´ë¯¸ì§€ ë¸”ë¡ ì¶”ê°€-->
                    <th:block th:each="image : ${imageList}">
                        <div class="col-md-6">
                            <article class="blog">
                                <figure>
                                    <img th:src="${image.generatedUrl}" alt="Generated Image">
<!--                                    <span class="ribbon off">old</span>-->
                                </figure>
                                <div class="post_info">
                                    <small th:text="${#temporals.format(image.createdAt, 'yyyy-MM-dd')}">ìƒì„± ë‚ ì§œ</small>
                                    <h3 th:text="${image.inputText}"></h3>
                                    <p>ì´ ì´ë¯¸ì§€ëŠ” AIë¡œ ìƒì„±ëœ ì¼€ì´í¬ ì‹œì•ˆì…ë‹ˆë‹¤.</p>
                                </div>
                            </article>
                        </div>
                    </th:block>
                </div>


                <!--                    ì—¬ê¸°ê¹Œì§€ì˜€ë‹¤.-->

                <!-- /col -->
                <!--                    <div class="col-md-6">-->
                <!--                        <article class="blog">-->
                <!--                            <figure>-->
                <!--                                <a href="blog-post.html"><img src="img/blog-6.jpg" alt="">-->
                <!--                                    <div class="preview"><span>Read more</span></div>-->
                <!--                                </a>-->
                <!--                            </figure>-->
                <!--                            <div class="post_info">-->
                <!--                                <small>Category - 20 Nov. 2017</small>-->
                <!--                                <h2><a href="blog-post.html">Te congue everti his salutandi</a></h2>-->
                <!--                                <p>Quodsi sanctus pro eu, ne audire scripserit quo. Vel an enim offendit salutandi, in eos quod omnes epicurei, ex veri qualisque scriptorem mei.</p>-->
                <!--                                <ul>-->
                <!--                                    <li>-->
                <!--                                        <div class="thumb"><img src="img/avatar.jpg" alt=""></div> Admin-->
                <!--                                    </li>-->
                <!--                                    <li><i class="icon_comment_alt"></i>20</li>-->
                <!--                                </ul>-->
                <!--                            </div>-->
                <!--                        </article>-->
                <!--                        &lt;!&ndash; /article &ndash;&gt;-->
                <!--                    </div>-->
                <!-- /col -->
            </div>
            <!-- /row -->

            <div class="pagination_fg">
                <a href="#">&laquo;</a>
                <a href="#" class="active">1</a>
                <a href="#">2</a>
                <a href="#">3</a>
                <a href="#">4</a>
                <a href="#">5</a>
                <a href="#">&raquo;</a>
            </div>

        </div>
        <!-- /col -->

        <aside class="col-lg-3">
            <div class="widget">
                <div class="widget-title first">
                    <!--							ìŒ..-->
                    <h4>AI ì‹œì•ˆìƒì„± í•˜ê¸°</h4>
                </div>
                <ul class="comments-list">
                    <!--							<li>-->
                    <!--								<div class="alignleft">-->
                    <!--									<a href="#0"><img src="img/blog-5.jpg" alt=""></a>-->
                    <!--								</div>-->
                    <!--								<small>Category - 11.08.2016</small>-->
                    <!--								<h3><a href="#" title="">Verear qualisque ex minimum...</a></h3>-->
                    <!--							</li>-->
                    <div class="form-group" >
<!--                        <form id="generateForm" th:action="@{/ai/generate}" method="post">-->
                        <form id = "generateForm" method="post">
                            <!--                                <label for="cakeDescription">ì¼€ì´í¬ ì‹œì•ˆ</label>-->
                            <!--                                <textarea id="cakeDescription" name="cakeDescription" class="form-control" style="height: 180px;" placeholder="ë§Œë“¤ê³  ì‹¶ì€ ì¼€ì´í¬ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”"></textarea>-->

                            <label for="cakePrompt">ì¼€ì´í¬ ì‹œì•ˆ </label>
                            <input id="cakePrompt" type="text" name="cakeDescription" class="form-control"
                                   placeholder="ì›í•˜ëŠ” ì¼€ì´í¬ì‹œì•ˆì„ ì ì–´ì£¼ì„¸ìš”" style="height: 180px;;">

                            <input type="submit" value="ìƒì„±" class="btn btn-primary" style="margin-top: 20px;">
                        </form>
                    </div>
                </ul>
            </div>
            <!-- /widget -->
            <!--					<div class="widget">-->
            <!--						<div class="widget-title">-->
            <!--							<h4>Categories</h4>-->
            <!--						</div>-->
            <!--						<ul class="cats">-->
            <!--							<li><a href="#">Food <span>(12)</span></a></li>-->
            <!--							<li><a href="#">Places to visit <span>(21)</span></a></li>-->
            <!--							<li><a href="#">New Places <span>(44)</span></a></li>-->
            <!--							<li><a href="#">Suggestions and guides <span>(31)</span></a></li>-->
            <!--						</ul>-->
            <!--					</div>-->
            <!-- /widget -->
            <!--					<div class="widget">-->
            <!--						<div class="widget-title">-->
            <!--							<h4>Popular Tags</h4>-->
            <!--						</div>-->
            <!--						<div class="tags">-->
            <!--							<a href="#">Food</a>-->
            <!--							<a href="#">Bars</a>-->
            <!--							<a href="#">Cooktails</a>-->
            <!--							<a href="#">Shops</a>-->
            <!--							<a href="#">Best Offers</a>-->
            <!--							<a href="#">Transports</a>-->
            <!--							<a href="#">Restaurants</a>-->
            <!--						</div>-->
            <!--					</div>-->
            <!-- /widget -->
        </aside>
        <!-- /aside -->
    </div>
    <!-- /row -->
    </div>
    <!-- /container -->

    <!-- ë¡œë”© ì¸ë””ì¼€ì´í„° ì¶”ê°€ -->
<!--    <div id="loading-indicator" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);">-->
<!--        <p>ì¼€ì´í¬ ì‹œì•ˆ ìƒì„±ì¤‘ì…ë‹ˆë‹¤ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”ğŸ° <br> -ë§ˆì‹¯ë‹¹-</p>-->
<!--    </div>-->
    <!-- ë¡œë”© ì¸ë””ì¼€ì´í„° ì¶”ê°€ -->
    <div id="loading-indicator" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);">
        <div style="background-color: #fff; padding: 20px; border-radius: 10px; box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1); text-align: center; max-width: 300px;">
            <p style="margin: 0; font-size: 16px; font-weight: 500;">
                ì¼€ì´í¬ ì‹œì•ˆ ìƒì„±ì¤‘ì…ë‹ˆë‹¤ <br> ì¡°ê¸ˆë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”ğŸ° <br> -ë§ˆì‹¯ë‹¹-
            </p>
        </div>
    </div>



</main>
<!-- /main -->


<div id="toTop"></div><!-- Back to top button -->

<div class="layer"></div><!-- Opacity Mask Menu Mobile -->
<!-- /Sign In Modal -->

<!-- COMMON SCRIPTS -->
<div layout:fragment="js">
    <script th:src="@{/js/customer/common_scripts.min.js}"></script>
    <script th:src="@{/js/customer/common_func.js}"></script>
    <script th:src="@{/js/customer/assets/validate.js}"></script>
    <!--    <script>-->
    <!--        $(document).ready(function () {-->
    <!--            $('form').submit(function (event) {-->
    <!--                event.preventDefault();-->

    <!--                // í¼ ë°ì´í„° ìˆ˜ì§‘-->
    <!--                var formData = $(this).serialize();-->

    <!--                // AJAX ìš”ì²­-->
    <!--                $.ajax({-->
    <!--                    url: '/ai/generate',-->
    <!--                    type: 'POST',-->
    <!--                    data: formData,-->
    <!--                    dataType: 'json',-->
    <!--                    success: function (data) {-->
    <!--                        if (data.imageUrl) {-->
    <!--                            // ì„±ê³µì ìœ¼ë¡œ ìƒì„±ëœ ì´ë¯¸ì§€ ë° ì •ë³´ ì²˜ë¦¬-->
    <!--                            var newArticle = `-->
    <!--                            <div class="col-md-6">-->
    <!--                                <article class="blog">-->
    <!--                                    <figure>-->
    <!--                                        <img src="${data.imageUrl}" alt="Generated Image">-->
    <!--                                    </figure>-->
    <!--                                    <div class="post_info">-->
    <!--                                        <small>${data.cakeDescription} - ${data.generatedDate}</small>-->
    <!--                                        <h2>AI ìƒì„± ì´ë¯¸ì§€</h2>-->
    <!--                                        <p>ì¼€ì´í¬ ì„¤ëª…: ${data.cakeDescription}</p>-->
    <!--                                    </div>-->
    <!--                                </article>-->
    <!--                            </div>-->
    <!--                        `;-->

    <!--                            // ìƒˆë¡œìš´ ê¸€ì„ ë¸”ë¡œê·¸ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€-->
    <!--                            $('.row').append(newArticle);-->
    <!--                        } else if (data.message) {-->
    <!--                            // ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬-->
    <!--                            alert(data.message);-->
    <!--                        }-->
    <!--                    },-->
    <!--                    error: function (xhr, status, error) {-->
    <!--                        console.error('Error:', error);-->
    <!--                        alert('ìš”ì²­ ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');-->
    <!--                    }-->
    <!--                });-->
    <!--            });-->
    <!--        });-->
    <!--    </script>-->
    <script>
        // í¼ ì „ì†¡ ì´ë²¤íŠ¸ë¥¼ ìº¡ì²˜
        $('#generateForm').submit(function (event) {
            event.preventDefault();

            // í¼ ë°ì´í„° ìˆ˜ì§‘
            let formData = $(this).serialize();

            // ë¡œë”© ì¸ë””ì¼€ì´í„° í‘œì‹œ
            $('#loading-indicator').show();

            // '[@{/ai/generate}]'

            // AJAX ìš”ì²­
            $.ajax({
                url: '/ai/generate',  // ì„œë²„ì—ì„œ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ëŠ” ì—”ë“œí¬ì¸íŠ¸
                type: 'POST',
                data: formData,
                dataType: 'json',  // ì„œë²„ ì‘ë‹µì´ JSONì´ë¼ê³  ëª…ì‹œ
                success: function (data) {
                    $('#loading-indicator').hide(); // ë¡œë”© ìˆ¨ê¹€
                    console.log(data); // objectë¡œ ë°›ì•„ì˜´
                    if (data.url !== null && data.url !== '') {
                        // ì„±ê³µì ìœ¼ë¡œ ìƒì„±ëœ ì´ë¯¸ì§€ì™€ ê´€ë ¨ ì •ë³´ë¥¼ ì²˜ë¦¬
                        let newImageBlock = `
        <div class="col-md-6">
            <article class="blog">
                <figure>
                    <img src="${data.url}" alt="Generated Image">
                    <span class="ribbon off">new</span>
                </figure>
                <div class="post_info">
                    <small>${new Date(data.createdAt).toLocaleDateString()}</small>
                    <h3>${data.description}</h3>
                    <p>ì´ ì´ë¯¸ì§€ëŠ” AIë¡œ ìƒì„±ëœ ì¼€ì´í¬ ì‹œì•ˆì…ë‹ˆë‹¤.</p>
                </div>
            </article>
        </div>
    `;


                        // ìƒˆë¡œìš´ ë¸”ë¡ì„ ì¶”ê°€
                        $('#image-container').append(newImageBlock);
                    } else {
                        alert("ì´ë¯¸ì§€ ìƒì„± ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                    }
                },
                error: function (xhr, status, error) {
                    $('#loading-indicator').hide();
                    // console.error('Error:', error);
                    // alert('ìš”ì²­ ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                    console.error('Error:', error);
                    if (xhr.responseJSON && xhr.responseJSON.message) {
                        // ì„œë²„ì—ì„œ ë³´ë‚¸ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ í‘œì‹œ
                        alert(xhr.responseJSON.message);
                    } else {
                        alert('ìš”ì²­ ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                    }
                }
            });
        });
    </script>
</div>
</body>
</html>